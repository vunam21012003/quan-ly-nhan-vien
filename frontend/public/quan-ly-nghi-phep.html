<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Qu·∫£n l√Ω Ngh·ªâ ph√©p</title>
    <!-- Custom CSS -->
    <link rel="stylesheet" href="./assets/css/styles.css" />
    <link rel="stylesheet" href="./assets/css/quan-ly-nghi-phep.css" />
  </head>
  <body>
    <div id="menuContainer"></div>

    <div class="container">
      <div class="header-flex">
        <h2>üìã Qu·∫£n l√Ω Ngh·ªâ ph√©p</h2>
        <button class="btn btn-primary" onclick="openModal('modalTaoDon')">
          <i class="fa-solid fa-plus"></i> T·∫°o ƒë∆°n xin ngh·ªâ
        </button>
      </div>

      <!-- B·ªô l·ªçc -->
      <div class="card">
        <div class="filter-row">
          <div class="form-group">
            <label>Tr·∫°ng th√°i</label>
            <select class="form-control" id="filterTrangThai">
              <option value="">T·∫•t c·∫£</option>
              <option value="cho_duyet" selected>Ch·ªù duy·ªát</option>
              <option value="da_duyet">ƒê√£ duy·ªát</option>
              <option value="tu_choi">B·ªã t·ª´ ch·ªëi</option>
            </select>
          </div>
          <div class="form-group">
            <label>NƒÉm</label>
            <select class="form-control" id="filterYear">
              <option value="2026">2026</option>
              <option value="2025">2025</option>
              <option value="2024">2024</option>
            </select>
          </div>
          <div style="width: 150px">
            <button
              class="btn btn-secondary"
              style="width: 100%"
              onclick="loadDanhSach()"
            >
              L·ªçc
            </button>
          </div>
        </div>
      </div>

      <!-- B·∫£ng d·ªØ li·ªáu -->
      <div class="card" style="padding: 0; overflow: hidden">
        <div class="table-wrapper">
          <table>
            <thead>
              <tr>
                <th style="width: 20%">Nh√¢n vi√™n</th>
                <th style="width: 12%">Lo·∫°i ngh·ªâ</th>
                <th style="width: 18%">Th·ªùi gian</th>
                <th style="width: 10%">S·ªë ng√†y</th>
                <th style="width: 20%">L√Ω do</th>
                <th style="width: 10%">ƒê√£ ngh·ªâ</th>
                <th style="width: 10%">Tr·∫°ng th√°i</th>
                <th style="text-align: right">H√†nh ƒë·ªông</th>
              </tr>
            </thead>
            <tbody id="tableBody">
              <!-- JS s·∫Ω render -->
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- MODAL T·∫†O ƒê∆†N -->
    <div id="modalTaoDon" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h3>üìù ƒê∆°n xin ngh·ªâ ph√©p</h3>
          <button class="close-btn" onclick="closeModal('modalTaoDon')">
            &times;
          </button>
        </div>
        <div class="modal-body">
          <form id="formTaoDon">
            <div class="form-group" style="margin-bottom: 15px">
              <label>Lo·∫°i h√¨nh ngh·ªâ</label>
              <select class="form-control" name="loai_nghi">
                <option value="phep_nam">Ngh·ªâ ph√©p nƒÉm</option>
                <option value="om_dau">Ngh·ªâ ·ªëm</option>
                <option value="khong_luong">Ngh·ªâ kh√¥ng l∆∞∆°ng</option>
                <option value="khac">Kh√°c</option>
              </select>
            </div>

            <div class="form-group" style="margin-bottom: 15px">
              <label>Th·ªùi gian ngh·ªâ</label>
              <div class="radio-group">
                <label>
                  <input
                    type="radio"
                    name="option_thoi_gian"
                    id="radioCaNgay"
                    value="ca_ngay"
                    checked
                    onchange="toggleThoiGian()"
                  />
                  Nhi·ªÅu ng√†y / C·∫£ ng√†y
                </label>
                <label>
                  <input
                    type="radio"
                    name="option_thoi_gian"
                    value="theo_buoi"
                    onchange="toggleThoiGian()"
                  />
                  0.5 ng√†y (S√°ng/Chi·ªÅu)
                </label>
              </div>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label>T·ª´ ng√†y</label>
                <input
                  type="date"
                  class="form-control"
                  name="ngay_bat_dau"
                  required
                />
              </div>

              <div class="form-group" id="divNgayKetThuc">
                <label>ƒê·∫øn ng√†y</label>
                <input type="date" class="form-control" name="ngay_ket_thuc" />
              </div>

              <div class="form-group d-none" id="divBuoiNghi">
                <label>Bu·ªïi ngh·ªâ</label>
                <select class="form-control" name="buoi_nghi">
                  <option value="sang">Bu·ªïi S√°ng</option>
                  <option value="chieu">Bu·ªïi Chi·ªÅu</option>
                </select>
              </div>
            </div>

            <div class="form-group">
              <label>L√Ω do</label>
              <textarea
                class="form-control"
                name="ly_do"
                rows="3"
                required
                placeholder="Nh·∫≠p l√Ω do..."
              ></textarea>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" onclick="closeModal('modalTaoDon')">
            ƒê√≥ng
          </button>
          <button class="btn btn-primary" onclick="submitDon()">G·ª≠i ƒë∆°n</button>
        </div>
      </div>
    </div>

    <!-- MODAL T·ª™ CH·ªêI -->
    <div id="modalTuChoi" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h3 style="color: var(--danger-color)">T·ª´ ch·ªëi ƒë∆°n ngh·ªâ</h3>
          <button class="close-btn" onclick="closeModal('modalTuChoi')">
            &times;
          </button>
        </div>
        <div class="modal-body">
          <input type="hidden" id="hiddenRejectId" />
          <div class="form-group">
            <label>L√Ω do t·ª´ ch·ªëi:</label>
            <textarea
              class="form-control"
              id="txtLyDoTuChoi"
              rows="3"
            ></textarea>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" onclick="closeModal('modalTuChoi')">
            H·ªßy
          </button>
          <button class="btn btn-danger" onclick="confirmTuChoi()">
            X√°c nh·∫≠n
          </button>
        </div>
      </div>
    </div>

    <!-- Import JS -->
    <script src="./assets/js/danh-sach.js"></script>
    <script type="module" src="./assets/js/quan-ly-nghi-phep.js"></script>
    <script type="module" src="./assets/js/navbar.js"></script>
  </body>
</html>
