<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Qu·∫£n l√Ω Ch·∫•m c√¥ng</title>

    <!-- Style g·ªëc (Global) -->
    <link rel="stylesheet" href="./assets/css/styles.css" />

    <!-- Style ri√™ng cho trang Ch·∫•m c√¥ng -->
    <link rel="stylesheet" href="./assets/css/cham-cong.css" />
  </head>

  <body class="bg">
    <div id="menuContainer"></div>

    <main class="container">
      <div class="page-header">
        <h1 class="page-title">Qu·∫£n l√Ω ch·∫•m c√¥ng</h1>
      </div>

      <!-- TAB MENU -->
      <div class="cc-tabs-container">
        <button class="cc-tab-btn active" data-tab="cham-cong-tab">
          üïí Ch·∫•m c√¥ng
        </button>
        <button class="cc-tab-btn" data-tab="ngay-le-tab">
          üéâ Ng√†y l·ªÖ / L√†m b√π
        </button>
        <button class="cc-tab-btn" data-tab="thuong-phat-tab">
          üí∞ Th∆∞·ªüng ph·∫°t
        </button>
      </div>

      <!-- TAB 1: CH·∫§M C√îNG -->
      <section id="cham-cong-tab" class="tab-content active cc-tab-content">
        <div class="cc-toolbar">
          <div class="cc-toolbar-group">
            <input
              id="nvId"
              type="number"
              placeholder="ID NV"
              style="width: 90px"
            />
            <input id="nvName" type="text" placeholder="T√™n nh√¢n vi√™n" />
            <select id="phongBanFilter">
              <option value="">-- Ph√≤ng ban --</option>
            </select>
            <select id="statusFilter">
              <option value="">-- Tr·∫°ng th√°i --</option>
              <option value="di_lam">ƒêi l√†m</option>
              <option value="di_muon">ƒêi mu·ªôn</option>
              <option value="ve_som">V·ªÅ s·ªõm</option>
              <option value="nghi_phep">Ngh·ªâ ph√©p</option>
              <option value="nghi_khong_phep">Ngh·ªâ kh√¥ng ph√©p</option>
              <option value="ngay_le">Ng√†y l·ªÖ</option>
            </select>
          </div>

          <div class="cc-toolbar-group">
            <span class="text-muted" style="font-size: 13px">T·ª´:</span>
            <input id="from" type="date" />
            <span class="text-muted" style="font-size: 13px">ƒê·∫øn:</span>
            <input id="to" type="date" />
          </div>

          <div class="cc-toolbar-actions">
            <button id="btn-search" class="btn btn-secondary">üîç L·ªçc</button>
            <button id="btn-refresh" class="btn btn-secondary">
              üîÑ T·∫£i l·∫°i
            </button>
            <button id="btn-create" class="btn btn-primary">‚ûï Th√™m m·ªõi</button>

            <label class="btn btn-secondary" title="Upload Excel">
              üì§ Upload
              <input type="file" id="fileExcel" accept=".xlsx,.xls" hidden />
            </label>
            <button id="btn-export" class="btn btn-success-outline">
              üìä Xu·∫•t Excel
            </button>
          </div>
        </div>

        <div class="table-wrap">
          <table class="table">
            <thead>
              <tr>
                <th>ID</th>
                <th>Nh√¢n vi√™n</th>
                <th>Ng√†y</th>
                <th>Check-in</th>
                <th>Check-out</th>
                <th>Tr·∫°ng th√°i</th>
                <th>Ghi ch√∫</th>
                <th>Thao t√°c</th>
              </tr>
            </thead>
            <tbody id="tbody">
              <tr>
                <td colspan="8" class="text-muted">ƒêang t·∫£i‚Ä¶</td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="pagination">
          <button id="prev" class="page-btn">¬´</button>
          <span id="pageInfo" class="text-muted">Trang 1/1</span>
          <button id="next" class="page-btn">¬ª</button>
        </div>
      </section>

      <!-- TAB 2: NG√ÄY L·ªÑ -->
      <section id="ngay-le-tab" class="tab-content cc-tab-content">
        <div class="cc-header-row">
          <h2>üéâ Danh s√°ch ng√†y l·ªÖ / l√†m b√π</h2>
        </div>

        <div id="ngay-le-add-block" class="cc-box-highlight">
          <strong class="text-primary">Th√™m ng√†y l·ªÖ m·ªõi:</strong>
          <div class="cc-flex-row">
            <input id="le-ngay" type="date" />
            <input id="le-ten" placeholder="T√™n ng√†y l·ªÖ" />
            <select id="le-loai">
              <option value="le">L·ªÖ</option>
              <option value="tet">T·∫øt</option>
              <option value="lam_bu">L√†m b√π</option>
              <option value="cuoi_tuan">Cu·ªëi tu·∫ßn</option>
            </select>
            <input
              id="le-so-ngay-nghi"
              type="number"
              step="1"
              placeholder="S·ªë ng√†y"
              style="width: 100px"
            />
            <button id="btn-add-le" class="btn btn-primary">L∆∞u</button>
          </div>
        </div>

        <div class="cc-toolbar">
          <div class="cc-toolbar-group">
            <input id="le-filter-ngay" type="date" />
            <input
              id="le-filter-ten"
              type="text"
              placeholder="T√¨m t√™n ng√†y l·ªÖ"
            />
            <select id="le-filter-loai">
              <option value="">-- T·∫•t c·∫£ lo·∫°i --</option>
              <option value="le">L·ªÖ</option>
              <option value="tet">T·∫øt</option>
              <option value="lam_bu">L√†m b√π</option>
            </select>
            <button id="btn-filter-le" class="btn btn-secondary">L·ªçc</button>
            <button id="btn-reset-le" class="btn btn-secondary">Reset</button>
          </div>
        </div>

        <table class="table">
          <thead>
            <tr>
              <th>Ng√†y</th>
              <th>T√™n</th>
              <th>Lo·∫°i</th>
              <th>S·ªë ng√†y ngh·ªâ</th>
              <th>Thao t√°c</th>
            </tr>
          </thead>
          <tbody id="tbody-le"></tbody>
        </table>
        <div class="pagination" id="pagination-le">
          <button id="le-prev" class="page-btn">¬´</button>
          <span id="le-pageInfo" class="text-muted">Trang 1/1</span>
          <button id="le-next" class="page-btn">¬ª</button>
        </div>
      </section>

      <!-- TAB 3: TH∆Ø·ªûNG PH·∫†T -->
      <section id="thuong-phat-tab" class="tab-content cc-tab-content">
        <div class="cc-header-row">
          <h2>üí∞ Qu·∫£n l√Ω th∆∞·ªüng ph·∫°t</h2>
        </div>

        <div id="thuong-phat-toolbar" class="cc-box-highlight">
          <div class="cc-flex-row">
            <select id="tp-loai" style="min-width: 100px">
              <option value="THUONG">Th∆∞·ªüng</option>
              <option value="PHAT">Ph·∫°t</option>
            </select>
            <input
              id="tp-so-tien"
              type="number"
              step="1000"
              placeholder="S·ªë ti·ªÅn (VNƒê)"
            />
            <input
              id="tp-ly-do"
              type="text"
              placeholder="L√Ω do..."
              style="flex-grow: 2"
            />
          </div>
          <div class="cc-flex-row mt-2">
            <select id="tp-thang">
              <option value="">-- Th√°ng --</option>
            </select>
            <select id="tp-nam">
              <option value="">-- NƒÉm --</option>
            </select>
            <button id="btn-filter-nv" class="btn btn-secondary">L·ªçc</button>
            <button id="btn-tp-add" class="btn btn-primary">Th√™m</button>
            <button id="btn-export-tp" class="btn btn-success-outline">
              üìä Xu·∫•t
            </button>
          </div>
        </div>

        <table class="table">
          <thead>
            <tr>
              <th>ID</th>
              <th>Nh√¢n vi√™n</th>
              <th>Lo·∫°i</th>
              <th>S·ªë ti·ªÅn</th>
              <th>L√Ω do</th>
              <th>Ng√†y t·∫°o</th>
              <th>Thao t√°c</th>
            </tr>
          </thead>
          <tbody id="tbody-tp">
            <tr>
              <td colspan="7" class="text-muted">ƒêang t·∫£i‚Ä¶</td>
            </tr>
          </tbody>
        </table>
        <div class="pagination" id="tp-pagination">
          <button id="tp-prev" class="page-btn">¬´</button>
          <span id="tp-pageInfo" class="text-muted">Trang 1/1</span>
          <button id="tp-next" class="page-btn">¬ª</button>
        </div>
      </section>

      <!-- MODAL NH·∫¨P LI·ªÜU EXCEL (Batch Entry) -->
      <dialog id="modal" style="max-width: 1050px; width: 98%">
        <form id="form" method="dialog" class="form" style="padding: 0">
          <div
            style="
              padding: 16px 24px;
              background: #f8fafc;
              border-bottom: 1px solid #e2e8f0;
              display: flex;
              justify-content: space-between;
              align-items: center;
            "
          >
            <div>
              <h3
                style="
                  margin: 0;
                  padding: 0;
                  background: transparent;
                  border: none;
                  font-size: 18px;
                  color: var(--primary);
                "
              >
                C·∫≠p nh·∫≠t ch·∫•m c√¥ng
              </h3>
              <small class="text-muted"
                >Nh·∫≠p ID <b>ho·∫∑c</b> T√™n ƒë·ªÉ t·ª± ƒë·ªông ƒëi·ªÅn th√¥ng tin</small
              >
            </div>
            <button
              type="button"
              id="btn-add-row"
              class="btn btn-primary btn-sm"
            >
              + Th√™m d√≤ng
            </button>
          </div>

          <div style="padding: 0; overflow-x: auto; max-height: 65vh">
            <table class="batch-table">
              <thead>
                <tr>
                  <th style="width: 80px">ID</th>
                  <th style="width: 220px">T√™n Nh√¢n vi√™n (G√µ ƒë·ªÉ t√¨m)</th>
                  <th style="width: 130px">Ng√†y</th>
                  <th style="width: 90px">V√†o</th>
                  <th style="width: 90px">Ra</th>
                  <th style="width: 130px">Tr·∫°ng th√°i</th>
                  <th>Ghi ch√∫</th>
                  <th style="width: 40px"></th>
                </tr>
              </thead>
              <tbody id="batch-tbody">
                <!-- JS s·∫Ω render c√°c d√≤ng nh·∫≠p li·ªáu ·ªü ƒë√¢y -->
              </tbody>
            </table>
          </div>

          <div
            id="modal-error"
            class="alert alert-error"
            style="margin: 10px 24px"
            hidden
          ></div>

          <div
            class="modal-actions"
            style="
              padding: 16px 24px;
              margin-top: 0;
              background: #fff;
              border-top: 1px solid #e2e8f0;
            "
          >
            <button id="btn-cancel" type="button" class="btn btn-secondary">
              H·ªßy b·ªè
            </button>
            <button id="btn-save" type="submit" class="btn btn-primary">
              üíæ L∆∞u t·∫•t c·∫£
            </button>
          </div>
        </form>
      </dialog>

      <!-- Modal Ph√¢n c√¥ng L√†m b√π (Gi·ªØ nguy√™n logic c≈©) -->
      <dialog id="phanCongModal">
        <h3>Ph√¢n c√¥ng l√†m b√π</h3>
        <p>Ng√†y: <strong id="pc-ngay"></strong></p>
        <div
          id="pc-list"
          style="
            max-height: 420px;
            /* overflow-y: auto; */
            padding: 10px;
            border: 1px solid #eee;
            border-radius: 8px;
          "
        ></div>
        <div class="modal-actions mt-4">
          <button id="btn-pc-cancel" type="button" class="btn btn-secondary">
            H·ªßy
          </button>
          <button id="btn-pc-save" type="button" class="btn btn-primary">
            L∆∞u Ph√¢n c√¥ng
          </button>
        </div>
      </dialog>
    </main>

    <footer class="footer">
      <div class="container">
        <small>¬© <span id="y"></span> HR System</small>
      </div>
    </footer>

    <script src="./assets/js/danh-sach.js"></script>
    <script type="module" src="./assets/js/cham-cong.js"></script>
    <script type="module" src="./assets/js/thuong-phat.js"></script>
    <script type="module" src="./assets/js/phan-cong-lam-bu.js"></script>
    <script type="module" src="./assets/js/navbar.js"></script>
    <script>
      document.addEventListener('DOMContentLoaded', () => {
        const tabs = document.querySelectorAll('.cc-tab-btn');
        const sections = document.querySelectorAll('.cc-tab-content');
        tabs.forEach((tab) => {
          tab.addEventListener('click', () => {
            tabs.forEach((t) => t.classList.remove('active'));
            sections.forEach((s) => s.classList.remove('active'));
            tab.classList.add('active');
            document.getElementById(tab.dataset.tab)?.classList.add('active');
          });
        });
      });
    </script>
  </body>
</html>
