<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Hợp đồng lao động - Quản lý nhân viên</title>

    <link rel="stylesheet" href="./assets/css/styles.css" />
    <link rel="stylesheet" href="./assets/css/hop-dong.css" />
  </head>
  <body class="bg">
    <div id="menuContainer"></div>
    <header></header>

    <main class="container wide">
      <h1>Quản lý Hợp đồng Lao động</h1>

      <div class="header-controls">
        <div class="filter-panel">
          <select id="filter_loai">
            <option value="">-- Loại hợp đồng --</option>
            <option value="Thử việc">Thử việc</option>
            <option value="Xác định thời hạn">Xác định thời hạn</option>
            <option value="Không xác định thời hạn">
              Không xác định thời hạn
            </option>
          </select>

          <select id="filter_trang_thai">
            <option value="">-- Trạng thái --</option>
            <option value="con_hieu_luc">Còn hiệu lực</option>
            <option value="het_han">Hết hạn</option>
            <option value="da_cham_dut">Đã chấm dứt</option>
          </select>

          <input type="date" id="filter_tu_ngay" />
          <input type="date" id="filter_den_ngay" />

          <button id="btnFilter" class="btn btn-secondary">Lọc</button>
          <button id="btnReset" class="btn btn-light">Reset</button>
        </div>

        <button id="btnAdd" class="btn btn-primary hidden">
          ➕ Thêm Hợp đồng
        </button>
      </div>

      <div class="table-wrap">
        <table id="contractsTable" class="table">
          <thead>
            <tr>
              <th>ID</th>
              <th>Nhân viên</th>
              <th>Số HĐ</th>
              <th>Loại hợp đồng</th>
              <th>Ngày ký</th>
              <th>Ngày bắt đầu</th>
              <th>Ngày kết thúc</th>
              <th>Lương thỏa thuận</th>
              <th>Phụ cấp</th>
              <th>Trạng thái</th>
              <th>Ghi chú</th>
              <th>Tài liệu</th>
              <th id="actionsCol" class="action-header">Hành động</th>
            </tr>
          </thead>
          <tbody id="contractsBody">
            <tr>
              <td colspan="13" class="text-muted">Đang tải dữ liệu...</td>
            </tr>
          </tbody>
        </table>
        <div class="pagination">
          <button id="btnPrev" class="btn btn-secondary">Trước</button>
          <span id="pageInfo">Trang 1/1</span>
          <button id="btnNext" class="btn btn-secondary">Sau</button>
        </div>
      </div>
    </main>

    <dialog id="contractModal" class="modal">
      <h3 id="modalTitle">Tạo Hợp đồng Mới</h3>
      <form id="contractForm">
        <div class="form-group">
          <label for="nhan_vien_id_input">Nhân viên</label>
          <input
            type="text"
            id="nhan_vien_id_input"
            required
            autocomplete="off"
            placeholder="Tìm kiếm nhân viên..."
          />
          <input type="hidden" id="nhan_vien_id" name="nhan_vien_id" />
          <div id="nhanVienDropdown" class="dropdown-list"></div>
        </div>

        <div class="form-group">
          <label for="so_hop_dong">Số hợp đồng</label>
          <input type="text" id="so_hop_dong" name="so_hop_dong" />
        </div>

        <div class="form-group">
          <label for="loai_hop_dong">Loại hợp đồng</label>
          <select id="loai_hop_dong" name="loai_hop_dong" required>
            <option value="Thử việc">Thử việc</option>
            <option value="Xác định thời hạn">Xác định thời hạn</option>
            <option value="Không xác định thời hạn">
              Không xác định thời hạn
            </option>
          </select>
        </div>

        <div class="form-group">
          <label for="ngay_ky">Ngày ký</label>
          <input type="date" id="ngay_ky" name="ngay_ky" />
        </div>

        <div class="form-group">
          <label for="ngay_bat_dau">Ngày bắt đầu</label>
          <input type="date" id="ngay_bat_dau" name="ngay_bat_dau" required />
        </div>

        <div class="form-group" id="ngayKetThucGroup">
          <label for="ngay_ket_thuc">Ngày kết thúc</label>
          <input type="date" id="ngay_ket_thuc" name="ngay_ket_thuc" />
        </div>

        <div class="form-group">
          <label for="luong_thoa_thuan">Lương thỏa thuận (VNĐ)</label>
          <input
            type="number"
            id="luong_thoa_thuan"
            name="luong_thoa_thuan"
            required
            min="0"
          />
        </div>

        <div class="form-group">
          <label for="file_hop_dong">Tệp hợp đồng (PDF, Doc, Image)</label>
          <input
            type="file"
            id="file_hop_dong"
            accept=".pdf,.doc,.docx,.png,.jpg,.jpeg"
          />
        </div>

        <div class="form-group">
          <label for="trang_thai">Trạng thái</label>
          <select id="trang_thai" name="trang_thai">
            <option value="con_hieu_luc">Còn hiệu lực</option>
            <option value="het_han">Hết hạn</option>
            <option value="da_cham_dut">Đã chấm dứt</option>
          </select>
        </div>

        <div class="form-group">
          <label for="ghi_chu">Ghi chú</label>
          <textarea id="ghi_chu" name="ghi_chu"></textarea>
        </div>

        <div class="form-actions">
          <button type="button" id="btnCancel" class="btn btn-secondary">
            Hủy
          </button>
          <button type="submit" id="btnSave" class="btn btn-primary">
            Lưu
          </button>
        </div>
      </form>
    </dialog>

    <dialog id="viewModal" class="modal view-modal">
      <h3 id="viewModalTitle">Chi tiết Hợp đồng</h3>
      <div id="contractDetailContent" class="detail-content"></div>
      <div class="form-actions">
        <button type="button" id="nut-dong-modal" class="btn btn-secondary">
          Đóng
        </button>
      </div>
    </dialog>

    <div id="pagination" class="pagination"></div>

    <script type="module" src="./assets/js/hop-dong.js"></script>
    <script type="module" src="./assets/js/navbar.js"></script>
    <script src="./assets/js/danh-sach.js"></script>
    <footer class="footer">
      <div class="container">&copy; 2024 Quản lý Nhân sự</div>
    </footer>
  </body>
</html>
